<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Public Letters</title>

    <link rel="stylesheet" href="./../src/output.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-[#52ba31] h-screen p-8 flex flex-col space-x-10">
    <header class="w-full h-1/12 space-x-36 top-0 left-0 z-50 flex mt-0 items-start bg-[#52ba31] mb-5">
        <div class="w-1/2 space-x-8 flex items-start">
            <a href="#" class="font-rockSalt tracking-normal text-white text-2xl font-extrabold pl-2">LetterTo2050</a>
            <a href="./HomePage.html" class="text-white text-lg underline underline-offset-4 hover:text-gray-300">
                <i class="fas fa-pen"></i>
                <span>Write to future</span>
            </a>
            <a href="#" class="text-white text-lg underline underline-offset-4 hover:text-gray-300">
                <i class="fas fa-book-open"></i>
                <span>Read Public Letters</span>
            </a>
        </div>
        <div class="w-1/2 flex space-x-6 justify-end items-start pr-3">
            <a href="./HomePage.html" class="text-white hover:text-gray-300">Home</a>
            <a href="/about" class="text-white hover:text-gray-300">About</a>
            <a href="./quiz.html" class="text-white hover:text-gray-300">Quiz</a>
            <a href="./login.html" class="text-white hover:text-gray-300">Login</a>
        </div>
    </header>

    <div class="w-full h-11/12 flex flex-row mt-8 pl-3">
        <div class="w-full flex flex-col">
        
            <h1 class="text-4xl font-extrabold text-white">Public Letters</h1>
            <p class="text-lg text-emerald-50 mb-4">
                Here, you can read letters that people have shared with the world. Feel free to be inspired!
            </p>

     
            <div id="publicLettersContainer" class="space-y-6">
         
            </div>
        </div>
    </div>
    <script>
        
        fetch('http://127.0.0.1:3000/api/v1/public-letters')
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    const lettersContainer = document.getElementById('publicLettersContainer');
                    data.letters.forEach(letter => {
                        const letterElement = document.createElement('div');
                        letterElement.classList.add('letter', 'p-4', 'bg-white', 'rounded-lg', 'shadow-lg');
                        
                        const formattedDate = new Date(letter.deliveryTime);
                        const formattedDateString = formattedDate.toLocaleDateString('tr-TR', {
                            year: 'numeric',
                            month: 'long',
                            day: 'numeric'
                        });
    
                        letterElement.innerHTML = `
                        <div class="letter-body">
                            <p class="text-gray-800">${letter.message}</p>
                
                            </div>
                        </div>
                        `;
    

    
             lettersContainer.appendChild(letterElement);
                    });
                } else {
                    const noLettersMessage = document.createElement('p');
                    noLettersMessage.textContent = 'No public letters found.';
                    noLettersMessage.classList.add('text-gray-500');
                    document.getElementById('publicLettersContainer').appendChild(noLettersMessage);
                }
            })
            .catch(error => {
                console.error('Error fetching public letters:', error);
                const errorMessage = document.createElement('p');
                errorMessage.textContent = 'An error occurred while loading public letters.';
                errorMessage.classList.add('text-red-500');
                document.getElementById('publicLettersContainer').appendChild(errorMessage);
            });
    </script>

</body>
</html>
